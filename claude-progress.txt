# PuraToDo Development Progress

## Project Overview
A modern todo application built with Next.js 16+, Supabase, and Tailwind CSS.
Supports groups, lists, and infinitely nested tasks.

## Tech Stack
- Frontend: Next.js 16+ (App Router) + TypeScript + Tailwind CSS v4 + shadcn/ui
- Backend: Supabase (PostgreSQL + Auth + Realtime + RLS)
- Testing: Playwright MCP (E2E)

## Data Model

```
users (Supabase Auth)
    └── groups (1:N)
            └── lists (1:N)
                    └── tasks (1:N, self-referencing for subtasks)
```

All tables include user_id for RLS policies and query optimization.

---

### 2026-02-16

#### 完成
- Feature #18: List UI - 显示列表
  - 创建 src/actions/lists.ts server action（getLists, createList, updateList, deleteList, reorderLists, moveListToGroup）
  - 创建 src/components/dashboard/list-panel.tsx 列表面板组件
  - 更新 Sidebar 组件支持分组选择（selectedGroupId, onGroupSelect）
  - 重构 Dashboard 页面，分离 DashboardContent 客户端组件
  - 列表显示名称和 emoji 图标
  - 修复分组切换后列表不更新的问题（改进点击事件处理）
- Feature #19: List Create - 创建列表
  - 已在 ListPanel 中实现创建对话框
  - 支持名称和 12 种 emoji 图标选择
  - 测试通过

#### 下一步
- 实现 Feature #20: List Edit - 编辑列表
- 实现 Feature #21: List Delete - 删除列表
- 继续实现 Feature #22-23: List Sort/Move

---

### 2026-02-15

#### 完成
- 重构 feature_list.json：从 phase 嵌套结构改为扁平数字编号 (1-52)
- 为每个 feature 添加 steps 字段，指导 Playwright 测试步骤
- 更新 claude-progress.txt 适配新格式
- Feature #16: Group Sort - 拖拽排序分组
  - 安装 @dnd-kit/core, @dnd-kit/sortable, @dnd-kit/utilities
  - 添加 reorderGroups server action 批量更新 sort_order
  - 更新 Sidebar 组件支持拖拽排序（SortableGroupItem 组件）
  - 添加 GripVertical 拖拽手柄，hover 时显示
- Feature #18: List UI - 显示列表
  - 创建 src/actions/lists.ts server action（getLists, createList, updateList, deleteList, reorderLists, moveListToGroup）
  - 创建 src/components/dashboard/list-panel.tsx 列表面板组件
  - 更新 Sidebar 组件支持分组选择（selectedGroupId, onGroupSelect）
  - 重构 Dashboard 页面，分离 DashboardContent 客户端组件
  - 列表显示名称和 emoji 图标

#### 下一步
- 实现 Feature #19: List Create - 创建列表（已在测试中实现）
- 实现 Feature #20: List Edit - 编辑列表（已在测试中实现）
- 实现 Feature #21: List Delete - 删除列表（已在测试中实现）
- 继续实现 Feature #22-23: List Sort/Move

---

### 2026-02-14

#### 完成
- Feature #12: Group List UI - 侧边栏显示分组列表
- Feature #13: Group Create - 创建分组（名称+颜色选择器）
- Feature #14: Group Edit - 编辑分组名称和颜色
- Feature #15: Group Delete - 删除分组（带确认对话框）
- Feature #17: Group Sidebar - 左侧固定侧边栏布局

#### 下一步
- 实现 Feature #16: Group Sort 或继续 List Module

---

### 2026-02-13

#### 完成
- Feature #6-11: 完整认证系统
  - #6: 登录页面 UI
  - #7: 用户注册
  - #8: 用户登录
  - #9: 用户登出
  - #10: Session 持久化
  - #11: 路由保护

#### 下一步
- Group Module 功能实现

---

### 2026-02-12

#### 完成
- Feature #1-5: 项目初始化
  - #1: Next.js 项目脚手架
  - #2: shadcn/ui 安装配置
  - #3: Supabase 项目创建
  - #4: 数据库 Schema
  - #5: Supabase Client 配置

#### 下一步
- 认证系统实现

---

## Notes
- Using Tailwind CSS v4 (latest)
- Next.js 16.1.6 with App Router
- shadcn/ui with new-york style, neutral color scheme
- All features tested with Playwright MCP
