# PuraToDo Tauri App - Progress Log

## Session 3: Scrollbar Fix
**Date:** 2026-02-20

### What was done
Fixed page scrollbar issue where the entire page (including header and sidebar) would scroll when there were many tasks, instead of just the task list area.

**Changes made to `DashboardPage.tsx`:**
1. Line 977: Changed outer container from `min-h-screen flex` to `h-screen overflow-hidden flex`
2. Line 1379: Added `overflow-hidden` to main area
3. Line 1401: Added `overflow-y-auto` to content area

**Result:** Now only the task list content area scrolls, while header and sidebar remain fixed.

---

## Session 2: Multi-Account UI Improvements
**Date:** 2026-02-20

### What was done
1. Modified LoginPage.tsx:
   - Removed "API Server" link from top-right corner
   - Added server URL input field directly in the login form (above email/password)
   - Shows default URL (http://localhost:3000) on first login
   - Validates server URL before login

2. Created AccountSwitcher.tsx component:
   - Shows current account avatar + email + server short name in header
   - Dropdown menu with all saved accounts
   - Current account has checkmark indicator
   - "Add new account" option - signs out current account but keeps others for switching
   - "Manage accounts" option - opens AccountSettingsDialog
   - "Sign out" option - signs out completely (removes all accounts)

3. Modified authStore.ts:
   - Added signOutCurrentAccount() function for switching accounts cleanly

4. Modified DashboardPage.tsx:
   - Integrated AccountSwitcher in the header (top-right area)

### Next Steps
- Run app and verify:
  - [ ] Login page shows server URL input
  - [ ] Can log in with custom server URL
  - [ ] Header shows current account info
  - [ ] Dropdown shows all accounts
  - [ ] Can switch between accounts
  - [ ] "Add new account" works
  - [ ] "Manage accounts" dialog opens
  - [ ] "Sign out" works

---

## Session 1: Feature Alignment with Web App
**Date:** 2026-02-20

### Background
- 重构 feature_list.json：从 209 条精简为 ~80 条（与 web 对齐）
- 所有测试设为 passes: false，需要逐项验证
- 发现 app 可能存在 bugs 和 UI 风格与 web 不一致的问题

### Current Status
- 13/79 items passing (功能 #1-3, #5-7, #9, #11, #18, #32-33, #38, #49-50)
- 已验证核心功能正常工作
- 深色模式正常工作

### Next Steps
1. 启动 Tauri app (`./init.sh app`)
2. 逐项验证功能是否正常工作
3. 修复发现的问题
4. 统一 UI 风格与 web 保持一致
