{
  "project": "PuraToDo",
  "description": "A modern todo application with groups, lists, and nested tasks",
  "features": [
    {
      "id": 1,
      "category": "Project Initialization",
      "description": "Create Next.js project scaffold with TypeScript, Tailwind CSS, ESLint",
      "steps": [
        "Run npx create-next-app@latest",
        "Verify project structure created",
        "Check TypeScript compiles without errors",
        "Confirm Tailwind CSS configured correctly",
        "Run npm run dev, verify localhost:3000 loads"
      ],
      "passes": true
    },
    {
      "id": 2,
      "category": "Project Initialization",
      "description": "Install and configure shadcn/ui with base components",
      "steps": [
        "Run npx shadcn@latest init",
        "Select new-york style, neutral base color",
        "Install Button component",
        "Verify Button component renders correctly",
        "Test Button with different variants"
      ],
      "passes": true
    },
    {
      "id": 3,
      "category": "Project Initialization",
      "description": "Create Supabase project and configure environment",
      "steps": [
        "Create new project in Supabase dashboard",
        "Get anon key and project URL",
        "Add environment variables to .env.local",
        "Verify Supabase client connects"
      ],
      "passes": true
    },
    {
      "id": 4,
      "category": "Project Initialization",
      "description": "Create database schema with groups, lists, tasks tables and RLS policies",
      "steps": [
        "Create groups table with user_id, name, color, sort_order",
        "Create lists table with user_id, group_id, name, icon, sort_order",
        "Create tasks table with user_id, list_id, name, parent_id for nesting",
        "Add RLS policies for user data isolation",
        "Create indexes on user_id and foreign keys"
      ],
      "passes": true
    },
    {
      "id": 5,
      "category": "Project Initialization",
      "description": "Configure Supabase client and create type definitions",
      "steps": [
        "Create browser client (src/lib/supabase/client.ts)",
        "Create server client (src/lib/supabase/server.ts)",
        "Generate database type definitions",
        "Verify TypeScript types are correct"
      ],
      "passes": true
    },
    {
      "id": 6,
      "category": "Authentication",
      "description": "Create login page UI with form components",
      "steps": [
        "Navigate to /login route",
        "Verify email input field exists",
        "Verify password input field exists",
        "Check Sign in button is present",
        "Confirm link to register page works"
      ],
      "passes": true
    },
    {
      "id": 7,
      "category": "Authentication",
      "description": "Email/password user registration",
      "steps": [
        "Navigate to /register route",
        "Fill email, password, confirm password fields",
        "Submit registration form",
        "Verify success message or email confirmation prompt",
        "Check user appears in Supabase Auth"
      ],
      "passes": true
    },
    {
      "id": 8,
      "category": "Authentication",
      "description": "Email/password user login",
      "steps": [
        "Navigate to /login route",
        "Enter registered email and password",
        "Click Sign in button",
        "Verify redirect to /dashboard",
        "Check user session is established"
      ],
      "passes": true
    },
    {
      "id": 9,
      "category": "Authentication",
      "description": "User logout functionality",
      "steps": [
        "Click logout button",
        "Verify user is signed out",
        "Confirm redirect to /login",
        "Verify session is cleared"
      ],
      "passes": true
    },
    {
      "id": 10,
      "category": "Authentication",
      "description": "Maintain login state after page refresh",
      "steps": [
        "Log in as user",
        "Refresh browser page",
        "Verify user is still logged in",
        "Check session persists across page loads"
      ],
      "passes": true
    },
    {
      "id": 11,
      "category": "Authentication",
      "description": "Protect routes, redirect unauthenticated users to login",
      "steps": [
        "Without being logged in, navigate to /dashboard",
        "Verify redirect to /login occurs",
        "After login, verify redirect back to intended page"
      ],
      "passes": true
    },
    {
      "id": 12,
      "category": "Group Module",
      "description": "Display all groups in a sidebar list",
      "steps": [
        "Log in as user",
        "Navigate to /dashboard",
        "Verify groups list appears in sidebar",
        "Check each group shows name and color indicator"
      ],
      "passes": true
    },
    {
      "id": 13,
      "category": "Group Module",
      "description": "Create new group with name and color",
      "steps": [
        "Click Add Group button",
        "Enter group name in dialog",
        "Select group color",
        "Click Create button",
        "Verify new group appears in sidebar"
      ],
      "passes": true
    },
    {
      "id": 14,
      "category": "Group Module",
      "description": "Edit group name and color",
      "steps": [
        "Click on group menu (three dots)",
        "Select Edit option",
        "Modify group name and/or color",
        "Click Save button",
        "Verify changes reflect in sidebar"
      ],
      "passes": true
    },
    {
      "id": 15,
      "category": "Group Module",
      "description": "Delete group with confirmation dialog",
      "steps": [
        "Click on group menu (three dots)",
        "Select Delete option",
        "Confirm deletion in dialog",
        "Verify group is removed from sidebar",
        "Verify associated lists/tasks are deleted"
      ],
      "passes": true
    },
    {
      "id": 16,
      "category": "Group Module",
      "description": "Drag to reorder groups in sidebar",
      "steps": [
        "Have multiple groups in sidebar",
        "Drag one group to a different position",
        "Verify group order updates",
        "Verify sort_order persists after refresh"
      ],
      "passes": true
    },
    {
      "id": 17,
      "category": "Group Module",
      "description": "Left fixed sidebar layout with branding",
      "steps": [
        "Verify sidebar is fixed on left side",
        "Check PuraToDo branding is visible",
        "Verify sidebar stays visible on scroll",
        "Confirm responsive behavior on smaller screens"
      ],
      "passes": true
    },
    {
      "id": 17.5,
      "category": "Sidebar Tree",
      "description": "Display lists under their parent group in sidebar (tree structure)",
      "steps": [
        "View sidebar with groups",
        "Verify each group shows its child lists indented below",
        "Click list in sidebar to view tasks in main area",
        "Verify list shows icon and name",
        "Test with groups that have no lists"
      ],
      "passes": true
    },
    {
      "id": 18,
      "category": "List Module",
      "description": "Display all lists under a selected group",
      "steps": [
        "Select a group in sidebar",
        "Verify lists appear in main content area",
        "Check each list shows name and icon"
      ],
      "passes": true
    },
    {
      "id": 19,
      "category": "List Module",
      "description": "Create new list with name and icon",
      "steps": [
        "Select a group",
        "Click Add List button",
        "Enter list name",
        "Select icon for list",
        "Click Create button",
        "Verify new list appears"
      ],
      "passes": true
    },
    {
      "id": 20,
      "category": "List Module",
      "description": "Edit list name and icon",
      "steps": [
        "Click on list menu",
        "Select Edit option",
        "Modify list name and/or icon",
        "Click Save button",
        "Verify changes reflect"
      ],
      "passes": true
    },
    {
      "id": 21,
      "category": "List Module",
      "description": "Delete list with confirmation",
      "steps": [
        "Click on list menu",
        "Select Delete option",
        "Confirm deletion in dialog",
        "Verify list is removed",
        "Verify associated tasks are deleted"
      ],
      "passes": true
    },
    {
      "id": 22,
      "category": "List Module",
      "description": "Drag to reorder lists",
      "steps": [
        "Have multiple lists under a group",
        "Drag one list to a different position",
        "Verify list order updates",
        "Verify sort_order persists after refresh"
      ],
      "passes": true
    },
    {
      "id": 23,
      "category": "List Module",
      "description": "Move list to another group",
      "steps": [
        "Click on list menu",
        "Select Move option",
        "Choose target group",
        "Verify list moves to new group",
        "Verify list no longer appears in original group"
      ],
      "passes": true
    },
    {
      "id": 24,
      "category": "Task Basics",
      "description": "Display all tasks under a selected list",
      "steps": [
        "Select a list",
        "Verify tasks appear in main area",
        "Check tasks show name and completion status"
      ],
      "passes": true
    },
    {
      "id": 25,
      "category": "Task Basics",
      "description": "Create new task with basic fields",
      "steps": [
        "Select a list",
        "Click Add Task button or use inline input",
        "Enter task name",
        "Click Create or press Enter",
        "Verify new task appears in list"
      ],
      "passes": true
    },
    {
      "id": 26,
      "category": "Task Basics",
      "description": "Mark task as complete or incomplete",
      "steps": [
        "Click checkbox on task",
        "Verify task shows completed state",
        "Click again to toggle",
        "Verify status changes correctly"
      ],
      "passes": true
    },
    {
      "id": 27,
      "category": "Task Basics",
      "description": "Edit task name",
      "steps": [
        "Click on task name to edit",
        "Modify task name",
        "Save changes",
        "Verify new name displays"
      ],
      "passes": true
    },
    {
      "id": 28,
      "category": "Task Basics",
      "description": "Delete task",
      "steps": [
        "Click on task menu",
        "Select Delete option",
        "Verify task is removed from list"
      ],
      "passes": true
    },
    {
      "id": 29,
      "category": "Task Basics",
      "description": "Drag to reorder tasks",
      "steps": [
        "Have multiple tasks in a list",
        "Drag one task to a different position",
        "Verify task order updates",
        "Verify sort_order persists after refresh"
      ],
      "passes": true
    },
    {
      "id": 30,
      "category": "Task Basics",
      "description": "Star or unstar a task",
      "steps": [
        "Click star icon on task",
        "Verify task shows starred state",
        "Click again to unstar",
        "Verify star status toggles correctly"
      ],
      "passes": true
    },
    {
      "id": 31,
      "category": "Task Basics",
      "description": "Task detail panel/modal for editing",
      "steps": [
        "Click on task to open detail panel",
        "Verify panel shows with full task details",
        "Check all editable fields are available",
        "Close panel and verify it dismisses"
      ],
      "passes": true
    },
    {
      "id": 32,
      "category": "Task Advanced",
      "description": "Set and edit task due date",
      "steps": [
        "Open task detail panel",
        "Set due date using date picker",
        "Save task",
        "Verify due date displays on task",
        "Edit due date and verify update"
      ],
      "passes": true
    },
    {
      "id": 33,
      "category": "Task Advanced",
      "description": "Set and edit task plan date",
      "steps": [
        "Open task detail panel",
        "Set plan date using date picker",
        "Save task",
        "Verify plan date displays on task",
        "Edit plan date and verify update"
      ],
      "passes": true
    },
    {
      "id": 34,
      "category": "Task Advanced",
      "description": "Add and edit comment on task",
      "steps": [
        "Open task detail panel",
        "Add comment text",
        "Save task",
        "Verify comment displays",
        "Edit comment and verify update"
      ],
      "passes": true
    },
    {
      "id": 35,
      "category": "Task Advanced",
      "description": "Set task duration in minutes",
      "steps": [
        "Open task detail panel",
        "Set duration using input",
        "Save task",
        "Verify duration displays on task"
      ],
      "passes": true
    },
    {
      "id": 36,
      "category": "Task Advanced",
      "description": "Create subtask under a task",
      "steps": [
        "Select a task",
        "Click Add Subtask option",
        "Enter subtask name",
        "Verify subtask appears under parent",
        "Verify subtask can be completed independently"
      ],
      "passes": true
    },
    {
      "id": 37,
      "category": "Task Advanced",
      "description": "Support unlimited subtask nesting levels",
      "steps": [
        "Create a subtask under a subtask",
        "Create another level deeper",
        "Verify all levels display correctly",
        "Verify completion status cascades appropriately",
        "Test at least 3+ levels of nesting"
      ],
      "passes": true
    },
    {
      "id": 38,
      "category": "UI/UX Optimization",
      "description": "Light/dark theme toggle support",
      "steps": [
        "Click theme toggle button",
        "Verify theme switches from light to dark",
        "Refresh page and verify theme persists",
        "Toggle back and verify"
      ],
      "passes": true
    },
    {
      "id": 39,
      "category": "UI/UX Optimization",
      "description": "Responsive layout for mobile devices",
      "steps": [
        "Resize browser to mobile width",
        "Verify sidebar collapses to hamburger menu",
        "Verify content adjusts appropriately",
        "Test touch interactions work"
      ],
      "passes": true
    },
    {
      "id": 40,
      "category": "UI/UX Optimization",
      "description": "Keyboard shortcuts for common operations",
      "steps": [
        "Press keyboard shortcut for new task",
        "Verify new task input appears",
        "Test other defined shortcuts",
        "Verify shortcuts work as documented"
      ],
      "passes": true
    },
    {
      "id": 41,
      "category": "UI/UX Optimization",
      "description": "Loading states with skeleton screens",
      "steps": [
        "Navigate to a page with data",
        "Verify skeleton loaders appear while loading",
        "Verify content replaces skeletons when loaded"
      ],
      "passes": true
    },
    {
      "id": 42,
      "category": "UI/UX Optimization",
      "description": "Empty state prompts when no data exists",
      "steps": [
        "Create a new group with no lists",
        "Verify friendly empty message shows",
        "Create a new list with no tasks",
        "Verify empty state shows for tasks"
      ],
      "passes": true
    },
    {
      "id": 43,
      "category": "Advanced Features",
      "description": "Global search across all tasks",
      "steps": [
        "Click search icon or press shortcut",
        "Type search query",
        "Verify search results appear",
        "Click result and verify navigation"
      ],
      "passes": true
    },
    {
      "id": 44,
      "category": "Advanced Features",
      "description": "Filter tasks by status, date, star",
      "steps": [
        "Apply status filter (completed/incomplete)",
        "Verify tasks filter correctly",
        "Apply date filter",
        "Apply star filter",
        "Verify filters work in combination"
      ],
      "passes": true
    },
    {
      "id": 45,
      "category": "Advanced Features",
      "description": "Today view showing tasks with plan_date = today",
      "steps": [
        "Navigate to Today view",
        "Verify only tasks with today's plan_date show",
        "Verify tasks without plan_date are hidden",
        "Test with tasks set to different dates"
      ],
      "passes": true
    },
    {
      "id": 46,
      "category": "Advanced Features",
      "description": "Realtime sync across multiple devices",
      "steps": [
        "Open app in two browser tabs",
        "Create/update/delete task in one tab",
        "Verify changes appear in other tab automatically",
        "Test with different operations"
      ],
      "passes": true
    },
    {
      "id": 47,
      "category": "i18n",
      "description": "Install and configure next-intl for internationalization",
      "steps": [
        "Install next-intl package",
        "Create src/i18n/request.ts for request configuration",
        "Create src/i18n/navigation.ts for routing helpers",
        "Update next.config.* to support i18n",
        "Verify i18n middleware works"
      ],
      "passes": true
    },
    {
      "id": 48,
      "category": "i18n",
      "description": "Create translation files for English and Chinese",
      "steps": [
        "Create src/messages/en.json with English translations",
        "Create src/messages/zh.json with Chinese translations",
        "Add translations for all UI strings (sidebar, lists, tasks, dialogs, etc.)",
        "Verify JSON structure is valid"
      ],
      "passes": true
    },
    {
      "id": 49,
      "category": "i18n",
      "description": "Create language switcher component and integrate into app",
      "steps": [
        "Create src/components/language-switcher.tsx component",
        "Add dropdown to select language (EN/ä¸­æ–‡)",
        "Update layout.tsx to provide locale and translations",
        "Update middleware to detect user locale preference",
        "Persist language preference in localStorage"
      ],
      "passes": true
    },
    {
      "id": 50,
      "category": "i18n",
      "description": "Update all UI components to use translation keys",
      "steps": [
        "Update Sidebar component with t() function",
        "Update ListPanel component with translations",
        "Update TaskPanel component with translations",
        "Update all dialogs (create/edit/delete) with translations",
        "Update empty states and error messages",
        "Update authentication pages (login, register)"
      ],
      "passes": true
    },
    {
      "id": 51,
      "category": "REST API",
      "description": "Create RESTful API for multi-platform client support (iOS/Android/HarmonyOS/macOS/Windows/Linux)",
      "steps": [
        "1. Create src/lib/api/auth.ts - Extract authentication logic from Server Actions, add verifyToken function that validates Supabase JWT from Authorization header",
        "2. Test: Call verifyToken with valid/invalid tokens, verify it returns correct user or null",
        "3. Create src/lib/api/response.ts - Add apiResponse<T> helper function that returns { success: boolean, data?: T, error?: string } format",
        "4. Test: Verify helper returns correct JSON structure with status codes",
        "5. Create src/middleware.ts - Add Next.js middleware to handle /api/v1/* routes, validate JWT token, reject requests without valid token",
        "6. Test: Send request to /api/v1/groups without token, verify 401 response; send with valid token, verify passes through",
        "7. Create src/app/api/v1/auth/route.ts - Add OPTIONS handler for CORS preflight requests",
        "8. Test: Send OPTIONS request, verify CORS headers are returned"
      ],
      "passes": true
    },
    {
      "id": 52,
      "category": "REST API - Auth",
      "description": "Implement authentication API endpoints",
      "steps": [
        "1. Create src/app/api/v1/auth/login/route.ts - POST endpoint that accepts { email, password }, calls supabase.auth.signInWithPassword, returns { access_token, refresh_token, user }",
        "2. Test: POST to /api/v1/auth/login with correct credentials, verify returns tokens; test with wrong password, verify returns error",
        "3. Create src/app/api/v1/auth/register/route.ts - POST endpoint that accepts { email, password }, calls supabase.auth.signUp, returns { access_token, refresh_token, user } or error",
        "4. Test: POST to /api/v1/auth/register with new email, verify user created; test with existing email, verify error returned",
        "5. Create src/app/api/v1/auth/refresh/route.ts - POST endpoint that accepts { refresh_token }, calls supabase.auth.refreshSession, returns new tokens",
        "6. Test: Use refresh_token from login to get new access_token, verify works",
        "7. Create src/app/api/v1/auth/logout/route.ts - POST endpoint that accepts { refresh_token }, calls supabase.auth.signOut",
        "8. Test: Call logout with token, verify session is invalidated",
        "9. Create src/app/api/v1/auth/me/route.ts - GET endpoint that returns current user info from JWT (no DB call needed for basic info)",
        "10. Test: GET /api/v1/auth/me with valid token, verify user data returned; without token, verify 401"
      ],
      "passes": true
    },
    {
      "id": 53,
      "category": "REST API - Groups",
      "description": "Implement Groups CRUD API",
      "steps": [
        "1. Create src/app/api/v1/groups/route.ts - GET handler that calls getGroups() from actions, returns apiResponse with groups array",
        "2. Test: GET /api/v1/groups with valid token, verify returns user's groups",
        "3. Add POST handler to src/app/api/v1/groups/route.ts - Accepts { name, color }, calls createGroup() from actions, returns created group",
        "4. Test: POST to /api/v1/groups with { name: 'Test' }, verify group created and returned",
        "5. Create src/app/api/v1/groups/[id]/route.ts - GET handler that fetches single group by id, returns group or 404",
        "6. Test: GET /api/v1/groups/[valid-id], verify returns group; GET /api/v1/groups/[invalid-id], verify 404",
        "7. Add PATCH handler to src/app/api/v1/groups/[id]/route.ts - Accepts { name, color }, calls updateGroup() from actions",
        "8. Test: PATCH /api/v1/groups/[id] with { name: 'New Name' }, verify group updated",
        "9. Add DELETE handler to src/app/api/v1/groups/[id]/route.ts - Calls deleteGroup() from actions, returns success",
        "10. Test: DELETE /api/v1/groups/[id], verify group deleted; try to fetch again, verify 404",
        "11. Create src/app/api/v1/groups/reorder/route.ts - PATCH handler that accepts { groupIds: string[] }, calls reorderGroups() from actions",
        "12. Test: Send reorder request with new order, verify order persists after GET"
      ],
      "passes": true
    },
    {
      "id": 54,
      "category": "REST API - Lists",
      "description": "Implement Lists CRUD API",
      "steps": [
        "1. Create src/app/api/v1/lists/route.ts - GET handler that accepts optional ?group_id param, calls getLists() from actions, returns lists array",
        "2. Test: GET /api/v1/lists, verify returns all lists; GET /api/v1/lists?group_id=xxx, verify filtered by group",
        "3. Add POST handler to src/app/api/v1/lists/route.ts - Accepts { group_id, name, icon }, calls createList() from actions",
        "4. Test: POST with { group_id, name: 'Shopping' }, verify list created under correct group",
        "5. Create src/app/api/v1/lists/[id]/route.ts - GET handler that fetches single list by id, returns list or 404",
        "6. Test: GET /api/v1/lists/[valid-id], verify returns list",
        "7. Add PATCH handler to src/app/api/v1/lists/[id]/route.ts - Accepts { name, icon }, calls updateList() from actions",
        "8. Test: PATCH with { icon: 'ðŸ›’' }, verify icon updated",
        "9. Add DELETE handler to src/app/api/v1/lists/[id]/route.ts - Calls deleteList() from actions",
        "10. Test: DELETE list, verify deleted and associated tasks are deleted",
        "11. Create src/app/api/v1/lists/[id]/move/route.ts - PATCH handler that accepts { group_id }, calls moveList() from actions",
        "12. Test: Move list to different group, verify list appears under new group",
        "13. Create src/app/api/v1/lists/reorder/route.ts - PATCH handler that accepts { listIds: string[] } and optional group_id",
        "14. Test: Reorder lists within a group, verify order persists"
      ],
      "passes": true
    },
    {
      "id": 55,
      "category": "REST API - Tasks",
      "description": "Implement Tasks CRUD API",
      "steps": [
        "1. Create src/app/api/v1/tasks/route.ts - GET handler that accepts optional ?list_id, ?completed, ?starred params, calls getTasks() from actions",
        "2. Test: GET /api/v1/tasks?list_id=xxx, verify returns tasks; GET /api/v1/tasks?completed=true, verify filters work",
        "3. Add POST handler to src/app/api/v1/tasks/route.ts - Accepts { list_id, name, parent_id? }, calls createTask() from actions",
        "4. Test: POST with { list_id, name: 'Buy milk' }, verify task created; POST with parent_id, verify subtask created",
        "5. Create src/app/api/v1/tasks/[id]/route.ts - GET handler that fetches task with subtasks using getTasksWithSubtasks()",
        "6. Test: GET /api/v1/tasks/[id], verify returns task with nested subtasks",
        "7. Add PATCH handler to src/app/api/v1/tasks/[id]/route.ts - Accepts { name, completed, starred, due_date, plan_date, comment, duration_minutes }, calls updateTask()",
        "8. Test: PATCH with { completed: true }, verify task marked complete; PATCH with { due_date: '2024-01-01' }, verify date set",
        "9. Add DELETE handler to src/app/api/v1/tasks/[id]/route.ts - Calls deleteTask() from actions",
        "10. Test: DELETE task, verify deleted; verify subtasks also deleted",
        "11. Create src/app/api/v1/tasks/reorder/route.ts - PATCH handler that accepts { taskIds: string[], list_id, parent_id? }",
        "12. Test: Reorder tasks, verify new order persists after GET",
        "13. Create src/app/api/v1/tasks/today/route.ts - GET handler that calls getTodayTasks() from actions",
        "14. Test: GET /api/v1/tasks/today, verify returns only tasks with plan_date = today",
        "15. Create src/app/api/v1/tasks/starred/route.ts - GET handler that filters tasks where starred = true",
        "16. Test: GET /api/v1/tasks/starred, verify returns only starred tasks"
      ],
      "passes": true
    },
    {
      "id": 56,
      "category": "REST API - Search",
      "description": "Implement search API endpoint",
      "steps": [
        "1. Create src/app/api/v1/search/tasks/route.ts - GET handler that accepts ?q= query param, calls searchTasks() from actions",
        "2. Test: GET /api/v1/search/tasks?q=buy, verify returns tasks matching 'buy' in name",
        "3. Add pagination: Accept ?page= and ?limit= params, implement pagination in the response",
        "4. Test: Request page 1 with limit 10, verify returns 10 items; request page 2, verify different items",
        "5. Ensure response includes { data: [], total: number, page: number, limit: number } format",
        "6. Test: Search with no results, verify returns empty array with count 0"
      ],
      "passes": true
    },
    {
      "id": 57,
      "category": "REST API - Docs",
      "description": "Generate API documentation",
      "steps": [
        "1. Install swagger-ui-react or create custom /api-docs page using @swagger-api/apidom",
        "2. Create src/app/api-docs/page.tsx - Add Swagger UI component pointing to /api/openapi.json",
        "3. Create src/app/api/openapi/route.ts - GET endpoint that returns OpenAPI 3.0 specification in JSON format",
        "4. Test: GET /api/openapi, verify valid OpenAPI JSON returned; verify /api-docs renders Swagger UI",
        "5. Document each endpoint: paths, methods, requestBody schema, response 200/400/401/500 schemas",
        "6. Test: Verify all 5 auth endpoints, 6 group endpoints, 7 list endpoints, 8 task endpoints, 1 search endpoint are documented",
        "7. Add authentication section: Explain Bearer token usage, show example curl request",
        "8. Test: Use 'Try it out' in Swagger UI to make real API calls"
      ],
      "passes": true
    },
    {
      "id": 58,
      "category": "CalDAV Integration",
      "description": "CalDAV Basic Auth authentication layer",
      "steps": [
        "1. Install caldav-ts or @proton/api-interfaces for CalDAV client types",
        "2. Create src/lib/caldav/client.ts - Initialize CalDAV client with base URL (e.g., https://puratodo.com/caldav)",
        "3. Implement authenticate(email, password) method using Basic Auth header encoding",
        "4. Test: Create user in app, use credentials to authenticate via CalDAV client, verify returns principal URL",
        "5. Store authenticated client instance in server session or pass credentials with each request",
        "6. Test: Authenticate with wrong password, verify returns 401 error"
      ],
      "passes": false
    },
    {
      "id": 59,
      "category": "CalDAV Integration",
      "description": "WebDAV PROPFIND/PROPPATCH basic methods",
      "steps": [
        "1. Create src/lib/caldav/methods.ts - Add propfind() method that sends HTTP PROPFIND request",
        "2. Test: Send PROPFIND to /caldav/ with Depth: 1 header, verify returns multistatus XML response",
        "3. Add proppatch() method that sends HTTP PROPPATCH request with XML body",
        "4. Test: Send PROPPATCH to update displayname property, verify 200 response",
        "5. Create XML parser utility to parse WebDAV multistatus responses to JSON",
        "6. Test: Parse sample PROPFIND response, verify correct JSON structure"
      ],
      "passes": false
    },
    {
      "id": 60,
      "category": "CalDAV Integration",
      "description": "CalDAV calendar-home-set discovery",
      "steps": [
        "1. Create src/lib/caldav/discovery.ts - Add discoverCalendars() that sends PROPFIND to principal URL",
        "2. Extract calendar-home-set from principal response",
        "3. Test: After authentication, discover calendars, verify returns user's calendar collection URL",
        "4. List calendar objects using REPORT method with filter for VTODO",
        "5. Test: Get all task containers, verify returns calendar URLs"
      ],
      "passes": false
    },
    {
      "id": 61,
      "category": "CalDAV Integration",
      "description": "Read task list in iCalendar VTODO format",
      "steps": [
        "1. Create src/lib/caldav/parser.ts - Add parseVTODO(icalString) that parses iCalendar VTODO to task object",
        "2. Map: UID->id, SUMMARY->name, STATUS->completed, DTSTART->due_date, DESCRIPTION->comment, PRIORITY->starred",
        "3. Test: Parse sample VTODO string, verify all fields extracted correctly",
        "4. Create src/lib/caldav/export.ts - Add fetchTasks(calendarUrl) that sends GET/CALDAV:query request",
        "5. Test: Fetch tasks from calendar, verify returns array of tasks in VTODO format",
        "6. Test: Verify due_date, plan_date, comment, duration_minutes are included in VTODO"
      ],
      "passes": false
    },
    {
      "id": 62,
      "category": "CalDAV Integration",
      "description": "Create/update/delete tasks via CalDAV",
      "steps": [
        "1. Create src/lib/caldav/write.ts - Add createTask(task) that converts task to VTODO string and sends PUT to calendar URL",
        "2. Generate VTODO: UID=task.id, SUMMARY=task.name, STATUS=COMPLETED/NEEDS-ACTION, DTSTART=due_date",
        "3. Test: Create task in app, sync via CalDAV, verify appears in Apple Reminders/other CalDAV client",
        "4. Add updateTask(task) method that sends PUT request to existing calendar resource URL",
        "5. Test: Update task name in external CalDAV client, verify app shows updated name",
        "6. Add deleteTask(uid) method that sends DELETE request to /calendar/tasks/{uid}.ics",
        "7. Test: Delete task in external client, verify task removed from app"
      ],
      "passes": false
    },
    {
      "id": 63,
      "category": "CalDAV Integration",
      "description": "Sync subtasks with RELATED-TO property",
      "steps": [
        "1. Update src/lib/caldav/export.ts - In VTODO generation, add RELATED-TO: {parent_uid} when task.parent_id is not null",
        "2. Test: Create parent task 'Buy groceries' and subtask 'Buy milk', export via CalDAV, verify 'Buy milk' VTODO has RELATED-TO pointing to parent UID",
        "3. Update src/lib/caldav/parser.ts - In parseVTODO, extract RELATED-TO field and map to parent_id",
        "4. Test: Import tasks from Apple Reminders with subtasks, verify hierarchy preserved in app",
        "5. Test: Move subtask to different parent in external app, verify parent_id updated after sync"
      ],
      "passes": false
    },
    {
      "id": 64,
      "category": "UI Layout Refactor",
      "description": "Implement three-column layout (Left: Sidebar, Center: Main Content, Right: Task Detail Panel)",
      "steps": [
        "1. Create a new state in DashboardContent to track selected task ID (selectedTaskId)",
        "2. Create a new component src/components/dashboard/task-detail-panel.tsx - A fixed right panel that displays task details (not a Sheet)",
        "3. Update DashboardContent layout to use CSS Grid or Flexbox for three-column layout: sidebar (w-64) + main content (flex-1) + detail panel (w-96, conditionally shown)",
        "4. Update TaskPanel to call a callback when a task is clicked, passing the task ID up to DashboardContent",
        "5. Add close button to TaskDetailPanel to deselect task and hide the panel",
        "6. Ensure the three-column layout is responsive: on tablet/mobile, the detail panel becomes a Sheet/overlay",
        "7. Test: Click on a task in TaskPanel, verify the detail panel appears on the right side",
        "8. Test: Edit task in detail panel, verify changes reflect in TaskPanel",
        "9. Test: Close detail panel, verify it hides and task is deselected",
        "10. Test: On mobile (<768px), verify detail panel behaves as a slide-over Sheet"
      ],
      "passes": false
    },
    {
      "id": 65,
      "category": "UI Layout Refactor",
      "description": "Polish three-column layout styling and interactions",
      "steps": [
        "1. Add visual separator (border) between main content and detail panel",
        "2. Add smooth transition animation when detail panel opens/closes",
        "3. Add empty state in detail panel when no task is selected (show helpful message)",
        "4. Add keyboard shortcut (Escape) to close the detail panel",
        "5. Ensure scroll position is independent in each column (sidebar, main, detail)",
        "6. Test: Verify animations are smooth (no jank)",
        "7. Test: Verify keyboard navigation works between panels",
        "8. Test: Verify dark mode looks correct in all three columns"
      ],
      "passes": false
    }
  ]
}
